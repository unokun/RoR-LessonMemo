# 画像アップロード

## 画像ファイルをファイルとして管理する

### メリット

* Webサーバー(例：apache)で処理することができる。(リバース・プロキシー)
* 処理が簡単。
* 画像ファイル名をユニークにする必要がある。

### デメリット

教科書にあるように、
    /public(Routing対象外)
に置く必要がある。

* 画像ファイルに細かいセキュリティを追加することは難しい。
* RoRアプリのみアクセス可能という設定はできる。
* 画像ファイルを同一ディレクトリに配置した場合、ファイル数が多くなるとアクセスに時間がかかるようになる。

## テーブル内の画像データを格納

### メリット

* データのバックアップ・リストが簡単

### デメリット

* アプリケーション・サーバーで処理する必要がある。

### 参考

* [Railsでプラグインを使わずに画像を表示させる \- Qiita](https://qiita.com/maru_katy/items/ea820e52caff9a872a5f)
* [Railsでファイルアップロードを実装する \- write ahead log](https://twinbird-htn.hatenablog.com/entry/2018/05/20/064517)

## アプリケーション・サーバー以外で画像ファイル管理する

# メリット

* 外部サーバーを使うことができる。
* 開発・メンテナンスコストを低減することができる。

### デメリット

* 実装が増える。
* 費用がかかる。

### 参考

* [Ruby on Rails5 から「aws\-sdk\-s3」を使って画像をアップロードする｜まえちゃんろぐ](https://blog.seiyamaeda.com/12645)